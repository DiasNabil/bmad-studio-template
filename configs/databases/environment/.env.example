# BMAD Studio Template - Database Environment Variables
# Copy this file to .env and update with your actual values

# =============================================================================
# PostgreSQL Configuration
# =============================================================================

# Database Connection
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=bmad_studio_db
POSTGRES_USER=bmad_admin
POSTGRES_PASSWORD=your_secure_postgresql_password_here

# Application Users
POSTGRES_APP_PASSWORD=your_app_user_password_here
POSTGRES_READONLY_PASSWORD=your_readonly_password_here
POSTGRES_MONITORING_PASSWORD=your_monitoring_password_here
POSTGRES_REPLICATION_PASSWORD=your_replication_password_here

# SSL Configuration
POSTGRES_SSL_MODE=require
POSTGRES_SSL_CERT_PATH=/etc/ssl/certs/postgresql.crt
POSTGRES_SSL_KEY_PATH=/etc/ssl/private/postgresql.key
POSTGRES_SSL_CA_PATH=/etc/ssl/certs/ca.crt

# Connection Pool Settings
POSTGRES_MAX_CONNECTIONS=20
POSTGRES_MIN_CONNECTIONS=5
POSTGRES_IDLE_TIMEOUT=30000
POSTGRES_CONNECTION_TIMEOUT=10000

# =============================================================================
# Redis Configuration  
# =============================================================================

# Redis Connection
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_secure_redis_password_here

# Redis Users (ACL)
REDIS_APP_USER_PASSWORD=your_redis_app_password_here
REDIS_READONLY_PASSWORD=your_redis_readonly_password_here
REDIS_MONITORING_PASSWORD=your_redis_monitoring_password_here
REDIS_CACHE_PASSWORD=your_redis_cache_password_here
REDIS_ADMIN_PASSWORD=your_redis_admin_password_here
REDIS_SENTINEL_PASSWORD=your_redis_sentinel_password_here

# Redis Cluster Configuration
REDIS_CLUSTER_PASSWORD=your_redis_cluster_password_here
REDIS_CLUSTER_NODES=redis-node1:6379,redis-node2:6379,redis-node3:6379

# Redis TLS Configuration
REDIS_TLS_ENABLED=true
REDIS_TLS_CERT_PATH=/etc/redis/tls/redis.crt
REDIS_TLS_KEY_PATH=/etc/redis/tls/redis.key
REDIS_TLS_CA_PATH=/etc/redis/tls/ca.crt

# =============================================================================
# AWS Configuration (for RDS/ElastiCache)
# =============================================================================

AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key

# RDS Configuration
RDS_INSTANCE_IDENTIFIER=bmad-studio-postgresql-primary
RDS_REPLICA_IDENTIFIER=bmad-studio-postgresql-replica

# ElastiCache Configuration
ELASTICACHE_CLUSTER_ID=bmad-studio-redis
ELASTICACHE_NODE_TYPE=cache.t3.medium

# =============================================================================
# Backup Configuration
# =============================================================================

# S3 Backup Settings
S3_BACKUP_BUCKET=bmad-studio-db-backups
S3_BACKUP_REGION=us-east-1
S3_BACKUP_ACCESS_KEY=your_backup_s3_access_key
S3_BACKUP_SECRET_KEY=your_backup_s3_secret_key

# Local Backup Settings
BACKUP_DIR=/var/backups/bmad-studio
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=gzip

# Backup Notification
BACKUP_NOTIFICATION_EMAIL=devops@bmadstudio.com
BACKUP_SLACK_WEBHOOK=https://hooks.slack.com/services/your/slack/webhook

# =============================================================================
# Monitoring Configuration
# =============================================================================

# Prometheus Configuration
PROMETHEUS_URL=http://prometheus:9090
PROMETHEUS_RETENTION=30d
PROMETHEUS_SCRAPE_INTERVAL=15s

# Grafana Configuration
GRAFANA_URL=http://grafana:3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your_grafana_password_here

# AlertManager Configuration
ALERTMANAGER_URL=http://alertmanager:9093
ALERTMANAGER_SMTP_HOST=smtp.gmail.com
ALERTMANAGER_SMTP_PORT=587
ALERTMANAGER_SMTP_USER=alerts@bmadstudio.com
ALERTMANAGER_SMTP_PASSWORD=your_smtp_password_here

# Slack Notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/slack/webhook
SLACK_CHANNEL=#database-alerts

# =============================================================================
# Performance Tuning
# =============================================================================

# PostgreSQL Performance
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_MAINTENANCE_WORK_MEM=64MB
POSTGRES_MAX_WAL_SIZE=1GB
POSTGRES_MIN_WAL_SIZE=80MB

# Redis Performance
REDIS_MAXMEMORY=2gb
REDIS_MAXMEMORY_POLICY=allkeys-lru
REDIS_SAVE_INTERVAL=900 1

# =============================================================================
# Security Configuration
# =============================================================================

# Encryption
DATABASE_ENCRYPTION_KEY=your_32_character_encryption_key_here
KMS_KEY_ID=arn:aws:kms:us-east-1:account:key/key-id

# Network Security
ALLOWED_CIDR_BLOCKS=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
VPN_CIDR_BLOCK=192.168.100.0/24

# =============================================================================
# Logging Configuration
# =============================================================================

# Log Levels
POSTGRES_LOG_LEVEL=notice
REDIS_LOG_LEVEL=notice
APP_LOG_LEVEL=info

# Log Retention
LOG_RETENTION_DAYS=90
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=10

# Centralized Logging
ELK_ELASTICSEARCH_URL=http://elasticsearch:9200
ELK_KIBANA_URL=http://kibana:5601
FLUENTD_HOST=fluentd
FLUENTD_PORT=24224

# =============================================================================
# Development/Testing
# =============================================================================

# Test Database
TEST_POSTGRES_DB=bmad_studio_test
TEST_REDIS_DB=1

# Development Mode
DEVELOPMENT_MODE=false
DEBUG_MODE=false
VERBOSE_LOGGING=false

# =============================================================================
# Health Check Configuration
# =============================================================================

# Health Check Intervals
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# Health Check Endpoints
POSTGRES_HEALTH_CHECK_QUERY=SELECT 1
REDIS_HEALTH_CHECK_COMMAND=PING

# =============================================================================
# Migration Configuration  
# =============================================================================

# Migration Settings
MIGRATION_AUTO_RUN=false
MIGRATION_TIMEOUT=300s
MIGRATION_ROLLBACK_ENABLED=true

# Schema Versioning
SCHEMA_VERSION_TABLE=schema_versions
MIGRATION_LOCK_TIMEOUT=60s
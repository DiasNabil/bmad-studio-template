## 6. MCP (Model Context Protocol) — Gestion avancée

### Objectif  
Mettre en place un système robuste pour sélectionner, installer et configurer automatiquement des MCP (Model Context Protocol) en fonction de la direction du projet. Ce système permettra à toute l’équipe – via Claude Code et ses agents – de bénéficier d’un contexte riche et pertinent pour les tâches intelligentes.

### Tâches techniques concrètes

#### 6.1. Intégration de la documentation d’Anthropic sur MCP  
- Se référer à la documentation officielle : MCP standardise les connexions entre IA et outils externes via des MCP servers ([docs.anthropic.com](https://docs.anthropic.com/en/docs/mcp)).  
- S’assurer que notre gestionnaire de MCP (`MCPManager`) supporte l’ajout dynamique de serveurs MCP via `mcp_servers`.

#### 6.2. Recherche et sélection de MCP via LobeHub  
- Utiliser LobeHub comme source pour découvrir des MCP utiles ([lobehub.com/mcp](https://lobehub.com/fr/mcp)).  
- Intégrer un module de veille : lister les MCP disponibles selon catégories (documentation, prompt libraries, DB, DevOps, tests).

#### 6.3. Installation automatique et validation  
- `MCPManager` doit :  
  - Identifier les MCP pertinents selon `projectProfile`.  
  - Installer/configurer automatiquement les MCP nécessaires.  
  - Générer un artefact `mcp-config.json` listant les MCP installés (nom, version, URL).

#### 6.4. MCP spécifiques utiles au template  
- **Prompt Library MCP** : aide à générer du code/design (React, UI).  
- **Library Docs MCP** : documentation de bibliothèques (LangChain, OpenAI, etc.).  
- **Knowledge Base MCP** : accès à des bases techniques (ML, IA).  
- **Playwright MCP** : tests automatisés.  
- **Postgres MCP** : gestion DB.  

#### 6.5. Sécurité & gouvernance  
- Restreindre les MCP aux sources approuvées (Anthropic + LobeHub validés).  
- Exiger validation humaine avant ajout de nouveaux MCP.  
- Versionner la config MCP dans Git pour traçabilité.

### Contraintes  
- Séparer clairement **MCP** (fourniture de contexte/outils externes) et **hooks** (callbacks internes).  
- Supporter plusieurs MCP par projet.  
- Prévoir un fallback (MCP générique ou local) en cas d’indisponibilité.

### Exemple de configuration

```yaml
mcp:
  - name: prompt-library-react
    source: lobehub
    url: https://.../react-prompt-mcp
    category: prompt-library
    agents: [ui-designer, dev]
  - name: library-docs-mcp
    source: lobehub
    url: https://.../docs-mcp
    category: docs
    agents: [architect, dev]
  - name: ai-book-agent
    source: lobehub
    url: https://.../ml-textbook-mcp
    category: knowledge-base
    agents: [analyst, architect]
```

---